{% extends 'base.html' %}
{% load static %}
{% block title %} Blog {% endblock title %}
{% block search %} 

<form action="{% url 'blog-page' %}" method="GET">
    <input type="text" placeholder="Search..." name="q" value="{{ request.GET.q }}">
    <button type="submit">
       <svg width="18" height="18" viewBox="0 0 18 18" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path d="M13.4443 13.4445L16.9999 17" stroke="white" stroke-width="2"
             stroke-linecap="round" stroke-linejoin="round" />
          <path
             d="M15.2222 8.11111C15.2222 12.0385 12.0385 15.2222 8.11111 15.2222C4.18375 15.2222 1 12.0385 1 8.11111C1 4.18375 4.18375 1 8.11111 1C12.0385 1 15.2222 4.18375 15.2222 8.11111Z"
             stroke="white" stroke-width="2" />
       </svg>
    </button>
 </form>
 {% endblock search %}
{% block content %}     
   <!-- Body main wrapper start -->
   <main>

      <!-- Breadcrumb area start  -->
      <div class="breadcrumb__area theme-bg-1 p-relative z-index-11 pt-95 pb-95">
         <div class="breadcrumb__thumb" data-background="{% static 'imgs/bg/breadcrumb-bg.jpg' %}"></div>
         <div class="container">
            <div class="row justify-content-center">
               <div class="col-xxl-12">
                  <div class="breadcrumb__wrapper text-center">
                     <h2 class="breadcrumb__title">Blog Classic</h2>
                     <div class="breadcrumb__menu">
                        <nav>
                           <ul>
                              <li><span><a href="index.html">Home</a></span></li>
                              <li><span>Blog Classic</span></li>
                           </ul>
                        </nav>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <!-- Breadcrumb area start  -->

      <!-- Postbox details area start -->
      <section class="postbox__area grey-bg-4 section-space">
         <div class="container">
            <div class="row gy-50">
               <div class="col-xxl-8 col-lg-8">
                  <div class="postbox__wrapper">
                     <!-- Bloglarni ko'rsatish -->
                     {% for blog in blogs %}
                     <article class="postbox__item mb-50 transition-3">
                         <div class="postbox__thumb w-img mb-30">
                             <a href="{% url 'blog_detail' blog.id %}">
                                 <img src="{{ blog.image.url }}" alt="">
                             </a>
                         </div>
                         <div class="postbox__content">
                             <div class="postbox__meta">
                                 <span>
                                     <a href="#">
                                         <svg width="13" height="14" viewBox="0 0 13 14" fill="none"
                                             xmlns="http://www.w3.org/2000/svg">
                                             <path
                                                 d="M11.6667 13V11.6667C11.6667 10.9594 11.3857 10.2811 10.8856 9.78105C10.3855 9.28095 9.70724 9 9 9H3.66667C2.95942 9 2.28115 9.28095 1.78105 9.78105C1.28095 10.2811 1 10.9594 1 11.6667V13"
                                                 stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                 stroke-linejoin="round" />
                                             <path
                                                 d="M6.33317 6.33333C7.80593 6.33333 8.99984 5.13943 8.99984 3.66667C8.99984 2.19391 7.80593 1 6.33317 1C4.86041 1 3.6665 2.19391 3.6665 3.66667C3.6665 5.13943 4.86041 6.33333 6.33317 6.33333Z"
                                                 stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                 stroke-linejoin="round" />
                                         </svg>
                                         By {{ blog.user }}
                                     </a>
                                 </span>
                                 <span>
                                     <svg width="15" height="15" viewBox="0 0 15 15" fill="none"
                                         xmlns="http://www.w3.org/2000/svg">
                                         <path
                                             d="M7.5 14C11.0899 14 14 11.0899 14 7.5C14 3.91015 11.0899 1 7.5 1C3.91015 1 1 3.91015 1 7.5C1 11.0899 3.91015 14 7.5 14Z"
                                             stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                             stroke-linejoin="round" />
                                         <path d="M7.5 3.59961V7.49961L10.1 8.79961" stroke="currentColor" stroke-width="1.5"
                                             stroke-linecap="round" stroke-linejoin="round" />
                                     </svg> {{ blog.created_date }}
                                 </span>
                                 <span>
                                     <svg width="14" height="14" viewBox="0 0 14 14" fill="none"
                                         xmlns="http://www.w3.org/2000/svg">
                                         <path
                                             d="M12.9718 6.66668C12.9741 7.54659 12.769 8.4146 12.3732 9.20001C11.9039 10.1412 11.1825 10.9328 10.2897 11.4862C9.39697 12.0396 8.36813 12.3329 7.31844 12.3333C6.4406 12.3356 5.57463 12.13 4.79106 11.7333L1 13L2.26369 9.20001C1.86791 8.4146 1.66281 7.54659 1.6651 6.66668C1.66551 5.61452 1.95815 4.58325 2.51025 3.68838C3.06236 2.79352 3.85211 2.0704 4.79106 1.60002C5.57463 1.20331 6.4406 0.997725 7.31844 1.00002H7.65099C9.03729 1.07668 10.3467 1.66319 11.3284 2.64726C12.3102 3.63132 12.8953 4.94378 12.9718 6.33334V6.66668Z"
                                             stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                             stroke-linejoin="round" />
                                     </svg> {{ blog.comments.count }}
                                 </span>
                             </div>
                             <h3 class="postbox__title">
                                 <a href="{% url 'blog_detail' blog.id %}">{{ blog.title }}</a>
                             </h3>
                             <div class="postbox__text">
                                 {{ blog.description|safe|truncatewords:29 }}
                             </div>
                             <div class="postbox__read-more">
                                 <a class="text-btn" href="{% url 'blog_detail' blog.id %}">Explore Now<span><i
                                         class="fa-regular fa-angle-right"></i></span></a>
                             </div>
                         </div>
                     </article>
                     {% endfor %}
                 
                     <!-- Pagination -->
                     <div class="pagination__wrapper">
                         <div class="bd-basic__pagination d-flex align-items-center justify-content-center">
                             <nav>
                                 <ul>
                                     {% if page_obj.has_previous %}
                                     <li>
                                         <a href="?page=1">«</a>  <!-- Birinchi sahifaga o'tish -->
                                     </li>
                                     <li>
                                         <a href="?page={{ page_obj.previous_page_number }}">‹</a>  <!-- Oldingi sahifaga o'tish -->
                                     </li>
                                     {% endif %}
                 
                                     {% for num in page_obj.paginator.page_range %}
                                     {% if num == page_obj.number %}
                                     <li><span class="current">{{ num }}</span></li>
                                     {% else %}
                                     <li><a href="?page={{ num }}">{{ num }}</a></li>
                                     {% endif %}
                                     {% endfor %}
                 
                                     {% if page_obj.has_next %}
                                     <li>
                                         <a href="?page={{ page_obj.next_page_number }}">›</a>  <!-- Keyingi sahifaga o'tish -->
                                     </li>
                                     <li>
                                         <a href="?page={{ page_obj.paginator.num_pages }}">»</a>  <!-- Yekun sahifaga o'tish -->
                                     </li>
                                     {% endif %}
                                 </ul>
                             </nav>
                         </div>
                     </div>
                 </div>                 
               </div>
               <div class="col-xxl-4 col-lg-4">
                  <div class="sidebar__wrapper bd-sticky pl-30">
                     <div class="sidebar__widget mb-20">
                        <div class="sidebar__widget-content">
                           <div class="sidebar__search">
                              <form action="#">
                                 <div class="sidebar__search-input">
                                    <input type="text" placeholder="Enter your keywords...">
                                    <button type="submit">
                                       <svg width="20" height="20" viewBox="0 0 20 20" fill="none"
                                          xmlns="http://www.w3.org/2000/svg">
                                          <path
                                             d="M9.55 18.1C14.272 18.1 18.1 14.272 18.1 9.55C18.1 4.82797 14.272 1 9.55 1C4.82797 1 1 4.82797 1 9.55C1 14.272 4.82797 18.1 9.55 18.1Z"
                                             stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
                                             stroke-linejoin="round" />
                                          <path d="M19.0002 19.0002L17.2002 17.2002" stroke="currentColor"
                                             stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                       </svg>
                                    </button>
                                 </div>
                              </form>
                           </div>
                        </div>
                     </div>
                     <div class="sidebar__widget mb-45">
                        <h3 class="sidebar__widget-title">Category</h3>
                        <ul>
                           <li>
                              <a href="{% url 'blog-page' %}">All
                                  <span>{{ all_blogs_count }}</span> 
                              </a>
                          </li>
                        </ul>
                        {% for category in categories  %}
                        <div class="sidebar__widget-content">
                           <ul>
                              <li><a href="{% url 'blog-page' category.id %}">{{category.name}}<span>{{ category.blog_set.count }}</span></a></li>
                           </ul>
                        </div>
                        {% endfor %}
                     </div>
                     <div class="sidebar__widget mb-45">
                        <h3 class="sidebar__widget-title">Recent Posts</h3>
                        <div class="sidebar__widget-content">
                            <div class="sidebar__post">
                                {% for post in blogs %}
                                    <div class="rc__post d-flex align-items-center">
                                        <div class="rc__post-thumb">
                                            <a href="{% url 'blog_detail' post.id %}">
                                                <img src="{{ post.image.url }}" alt="">
                                            </a>
                                        </div>
                                        <div class="rc__post-content">
                                            <h4 class="rc__post-title">
                                                <a href="{% url 'blog_detail' post.id %}">{{ post.title }}</a>
                                            </h4>
                                            <div class="rc__meta">
                                                <span>
                                                    <svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                        <path d="M7.5 14C11.0899 14 14 11.0899 14 7.5C14 3.91015 11.0899 1 7.5 1C3.91015 1 1 3.91015 1 7.5C1 11.0899 3.91015 14 7.5 14Z"
                                                              stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                        <path d="M7.5 3.59961V7.49961L10.1 8.79961" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                                                    </svg>
                                                    {{ post.created_date|date:"F d, Y" }}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>                    
                     <div class="sidebar__widget">
                        <h3 class="sidebar__widget-title">Tags</h3>
                        <div class="sidebar__widget-content">
                           <ul>
                              {% for tag in tags %}
                              <li>
                                  <a href="{% url 'blogs_by_tag' tag.id %}">
                                      {{ tag.name }}
                                      <span>{{ tag.blog_count }}</span>
                                  </a>
                              </li>
                              {% endfor %}
                          </ul>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </section>
      <!-- Postbox details area end -->

   </main>
   <!-- Body main wrapper end -->
   {% endblock content %}     